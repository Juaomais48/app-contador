<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contador de Passageiros</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- Tela Inicial -->
        <div id="telaInicial" class="screen active">
            <h1>Contador de Passageiros</h1>
            <button class="btn btn-primary" onclick="mostrarTela('telaNova')">Criar Contagem</button>
            <button class="btn btn-secondary" onclick="mostrarTela('telaLista')">Lista de Contagens</button>
            <button class="btn btn-tertiary" onclick="alert('Configurações em desenvolvimento')">Configurações</button>
        </div>

        <!-- Tela Nova Contagem -->
        <div id="telaNova" class="screen">
            <h1>Nova Contagem</h1>
            <div class="form-group">
                <label>Data</label>
                <input type="date" id="inputData" required>
            </div>
            <div class="form-group">
                <label>Número do Veículo</label>
                <input type="text" id="inputVeiculo" placeholder="Digite o número do veículo" required>
            </div>
            <button class="btn btn-primary" onclick="iniciarContagem()">Iniciar Contagem</button>
            <button class="btn btn-tertiary" onclick="mostrarTela('telaInicial')">Voltar</button>
        </div>

        <!-- Tela de Contagem -->
        <div id="telaContagem" class="screen">
            <div class="info-contagem">
                <h2 id="pontoAtual">Ponto 1</h2>
            </div>

            <div class="contagem-container">
                <!-- Campo Sensor -->
                <div class="campo-contagem sensor">
                    <h3>Sensor</h3>
                    <div class="display-valor" id="displaySensor">0</div>
                    
                    <!-- Teclado Numérico -->
                    <div class="teclado-numerico" id="tecladoSensor">
                        <button class="tecla" onclick="adicionarDigito('sensor', '7')">7</button>
                        <button class="tecla" onclick="adicionarDigito('sensor', '8')">8</button>
                        <button class="tecla" onclick="adicionarDigito('sensor', '9')">9</button>
                        <button class="tecla" onclick="adicionarDigito('sensor', '4')">4</button>
                        <button class="tecla" onclick="adicionarDigito('sensor', '5')">5</button>
                        <button class="tecla" onclick="adicionarDigito('sensor', '6')">6</button>
                        <button class="tecla" onclick="adicionarDigito('sensor', '1')">1</button>
                        <button class="tecla" onclick="adicionarDigito('sensor', '2')">2</button>
                        <button class="tecla" onclick="adicionarDigito('sensor', '3')">3</button>
                        <button class="tecla" onclick="adicionarDigito('sensor', '0')" style="grid-column: span 3;">0</button>
                    </div>

                    <!-- Botão Clique -->
                    <div class="botao-clique-container" id="cliqueSensor" style="display: none;">
                        <button class="botao-clique sensor-clique" onclick="incrementarClique('sensor')">
                            +1
                        </button>
                    </div>
                    
                    <div class="botoes">
                        <button class="btn btn-danger" onclick="apagarCampo('sensor')">Apagar</button>
                        <button class="btn btn-success" onclick="confirmarCampo('sensor')">Confirmar</button>
                    </div>
                </div>

                <!-- Campo Visual -->
                <div class="campo-contagem visual">
                    <h3>Visual</h3>
                    <div class="display-valor" id="displayVisual">0</div>
                    
                    <!-- Teclado Numérico -->
                    <div class="teclado-numerico" id="tecladoVisual">
                        <button class="tecla" onclick="adicionarDigito('visual', '7')">7</button>
                        <button class="tecla" onclick="adicionarDigito('visual', '8')">8</button>
                        <button class="tecla" onclick="adicionarDigito('visual', '9')">9</button>
                        <button class="tecla" onclick="adicionarDigito('visual', '4')">4</button>
                        <button class="tecla" onclick="adicionarDigito('visual', '5')">5</button>
                        <button class="tecla" onclick="adicionarDigito('visual', '6')">6</button>
                        <button class="tecla" onclick="adicionarDigito('visual', '1')">1</button>
                        <button class="tecla" onclick="adicionarDigito('visual', '2')">2</button>
                        <button class="tecla" onclick="adicionarDigito('visual', '3')">3</button>
                        <button class="tecla" onclick="adicionarDigito('visual', '0')" style="grid-column: span 3;">0</button>
                    </div>

                    <!-- Botão Clique -->
                    <div class="botao-clique-container" id="cliqueVisual" style="display: none;">
                        <button class="botao-clique visual-clique" onclick="incrementarClique('visual')">
                            +1
                        </button>
                    </div>
                    
                    <div class="botoes">
                        <button class="btn btn-danger" onclick="apagarCampo('visual')">Apagar</button>
                        <button class="btn btn-success" onclick="confirmarCampo('visual')">Confirmar</button>
                    </div>
                </div>
            </div>

            <button class="fab" onclick="mostrarMenuFlutuante()">⋮</button>
        </div>

        <!-- Tela Lista de Contagens -->
        <div id="telaLista" class="screen">
            <h1>Lista de Contagens</h1>
            <input type="text" id="searchInput" class="search-bar" placeholder="Buscar por data ou veículo..." onkeyup="filtrarContagens()">
            <div id="listaContagens"></div>
            <button class="btn btn-tertiary" onclick="mostrarTela('telaInicial')" style="margin-top: 20px;">Voltar</button>
        </div>
    </div>

    <!-- Modal de Detalhes -->
    <div id="modalDetalhes" class="modal" onclick="fecharModal('modalDetalhes')">
        <div class="modal-content" onclick="event.stopPropagation()">
            <h2>Detalhes da Contagem</h2>
            <div id="conteudoModal"></div>
            <button class="btn btn-secondary" onclick="fecharModal('modalDetalhes')">Fechar</button>
        </div>
    </div>

    <!-- Modal Menu Flutuante -->
    <div id="modalMenu" class="modal" onclick="fecharModal('modalMenu')">
        <div class="modal-content menu-opcoes" onclick="event.stopPropagation()">
            <h3>Opções</h3>
            
            <div class="opcao-modo">
                <label>Sensor:</label>
                <select id="modoSensor" onchange="alterarModoInsercao('sensor')">
                    <option value="teclado">Teclado</option>
                    <option value="clique">Clique (+1)</option>
                </select>
            </div>

            <div class="opcao-modo">
                <label>Visual:</label>
                <select id="modoVisual" onchange="alterarModoInsercao('visual')">
                    <option value="teclado">Teclado</option>
                    <option value="clique">Clique (+1)</option>
                </select>
            </div>

            <button class="btn btn-primary" style="margin-top: 20px;" onclick="finalizarContagem()">Finalizar Contagem</button>
            <button class="btn btn-secondary" onclick="fecharModal('modalMenu')">Fechar</button>
        </div>
    </div>

    <script src="script.js"></script>  
</body>
</html>